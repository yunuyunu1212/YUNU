import streamlit as st
import pandas as pd
from datetime import datetime

# í˜ì´ì§€ ì„¤ì •
st.set_page_config(page_title="ëª©ì¼ì¤‘í•™êµ ì»¤ë®¤ë‹ˆí‹°", layout="wide")

# ì‚¬ì´ë“œë°” ë©”ë‰´
menu = ["í™ˆ", "í•™êµ ì†Œê°œ", "ì˜¤ëŠ˜ì˜ ê¸‰ì‹", "ììœ ê²Œì‹œíŒ"]
choice = st.sidebar.selectbox("ë©”ë‰´ë¥¼ ì„ íƒí•˜ì„¸ìš”", menu)

# 1. í™ˆ í™”ë©´
if choice == "í™ˆ":
    st.title("ğŸ« ëª©ì¼ì¤‘í•™êµì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤")
    st.image("https://via.placeholder.com/800x400.png?text=Mokil+Middle+School") # í•™êµ ì‚¬ì§„ URLë¡œ ë³€ê²½ ê°€ëŠ¥
    
    col1, col2 = st.columns(2)
    with col1:
        st.subheader("ğŸ“¢ ì£¼ìš” ê³µì§€ì‚¬í•­")
        st.write("- 2026í•™ë…„ë„ ì‹ ì…ìƒ ë°°ì • ì•ˆë‚´")
        st.write("- ë™ì•„ë¦¬ ë°œí‘œíšŒ ì¼ì • ë³€ê²½ ê³µì§€")
    with col2:
        st.subheader("ğŸ“… ì£¼ìš” í•™ì‚¬ ì¼ì •")
        st.write("- 1ì›” 15ì¼: ê²¨ìš¸ë°©í•™ì‹")
        st.write("- 3ì›” 2ì¼: ì…í•™ì‹ ë° ê°œí•™ì‹")

# 2. í•™êµ ì†Œê°œ
elif choice == "í•™êµ ì†Œê°œ":
    st.header("ğŸ“ í•™êµ ìœ„ì¹˜ ë° ì •ë³´")
    st.write("**êµí›ˆ:** ë°”ë¥¸ ë§ˆìŒ, ì•Œì°¬ ì‹¤ë ¥, êµ³ì„¼ ì²´ë ¥")
    st.write("**ì£¼ì†Œ:** ì„œìš¸íŠ¹ë³„ì‹œ ì–‘ì²œêµ¬ ì‹ ëª©ë¡œ 25")
    # ì§€ë„ ì˜ˆì‹œ
    st.map(pd.DataFrame({'lat': [37.518], 'lon': [126.872]}))

# 3. ì˜¤ëŠ˜ì˜ ê¸‰ì‹
elif choice == "ì˜¤ëŠ˜ì˜ ê¸‰ì‹":
    st.header("ğŸ´ ì˜¤ëŠ˜ì˜ ì‹ë‹¨")
    today = datetime.now().strftime("%Yë…„ %mì›” %dì¼")
    st.info(f"ë‚ ì§œ: {today}")
    
    # ì˜ˆì‹œ ë°ì´í„° (ë‚˜ì¤‘ì— NEIS API ì—°ê²° ê°€ëŠ¥)
    meals = ["ì¡ê³¡ë°¥", "ì‡ ê³ ê¸° ë¯¸ì—­êµ­", "ì œìœ¡ë³¶ìŒ", "ë°°ì¶”ê¹€ì¹˜", "ì‚¬ê³¼"]
    for food in meals:
        st.write(f"- {food}")

# 4. ììœ ê²Œì‹œíŒ (ê°„ì´ ê¸°ëŠ¥)
elif choice == "ììœ ê²Œì‹œíŒ":
    st.header("ğŸ“ í•™ìƒ ììœ ê²Œì‹œíŒ")
    
    if 'posts' not in st.session_state:
        st.session_state.posts = []

    with st.form("post_form"):
        name = st.text_input("ì´ë¦„")
        content = st.text_area("ë‚´ìš©")
        submit = st.form_submit_button("ì˜¬ë¦¬ê¸°")
        
        if submit and content:
            st.session_state.posts.append({"name": name, "content": content, "time": datetime.now()})
            st.success("ê²Œì‹œê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!")

    st.divider()
    for post in reversed(st.session_state.posts):
        st.write(f"**{post['name']}**: {post['content']} ({post['time'].strftime('%H:%M')})")
